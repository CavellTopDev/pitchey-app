# Investor Service Worker Configuration
# Handles all investor-specific endpoints with optimizations

name = "pitchey-investor-service"
main = "src/index.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

[vars]
# Service configuration
FRONTEND_URL = "https://pitchey-5o8.pages.dev"
JWT_SECRET = "vYGh89KjLmNpQrStUwXyZ123456789ABCDEFGHIJKLMNOPQRSTuvwxyz"

# Error tracking
SENTRY_DSN = "https://fd5664ae577039ccb7cce31e91f54533@o4510137537396736.ingest.de.sentry.io/4510138308755536"
SENTRY_ENVIRONMENT = "production"
SENTRY_RELEASE = "investor-service-v1.0"

# Upstash Redis for caching (investor-specific cache)
# UPSTASH_REDIS_REST_URL = "https://your-redis.upstash.io"
# UPSTASH_REDIS_REST_TOKEN = "your-token"

# KV for investor-specific caching
[[kv_namespaces]]
binding = "CACHE"
id = "investor-cache-namespace-id"

# R2 for investor document storage
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "pitchey-investor-uploads"

# Neon PostgreSQL via Hyperdrive for optimal edge performance
[[hyperdrive]]
binding = "HYPERDRIVE"
id = "983d4a1818264b5dbdca26bacf167dee"

# Production Environment
[env.production]
name = "pitchey-investor-service"

[env.production.vars]
FRONTEND_URL = "https://pitchey-5o8.pages.dev"
JWT_SECRET = "vYGh89KjLmNpQrStUwXyZ123456789ABCDEFGHIJKLMNOPQRSTuvwxyz"
SENTRY_DSN = "https://fd5664ae577039ccb7cce31e91f54533@o4510137537396736.ingest.de.sentry.io/4510138308755536"
SENTRY_ENVIRONMENT = "production"
SENTRY_RELEASE = "investor-service-v1.0"

[[env.production.kv_namespaces]]
binding = "CACHE"
id = "investor-cache-namespace-id"

[[env.production.r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "pitchey-investor-uploads"

[[env.production.hyperdrive]]
binding = "HYPERDRIVE"
id = "983d4a1818264b5dbdca26bacf167dee"