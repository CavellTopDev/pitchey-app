name = "pitchey-browse-api"
main = "index.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Durable Objects disabled for free plan
# To enable WebSocket support, uncomment these lines and upgrade to a paid plan:
# [[durable_objects.bindings]]
# name = "WEBSOCKET_ROOMS"
# class_name = "WebSocketRoom"
# 
# [[migrations]]
# tag = "v1"
# new_classes = ["WebSocketRoom"]

[env.development]
name = "pitchey-browse-api-dev"
vars = { FRONTEND_URL = "http://localhost:5173", DATABASE_URL = "postgresql://test:test@localhost:5432/test", JWT_SECRET = "dev-secret-key" }

[env.production]
name = "pitchey-production"

[env.production.vars]
FRONTEND_URL = "https://pitchey.pages.dev"
# Database and Auth
DATABASE_URL = "postgresql://neondb_owner:npg_YibeIGRuv40J@ep-old-snow-abpr94lc-pooler.eu-west-2.aws.neon.tech/neondb?sslmode=require"
JWT_SECRET = "vYGh89KjLmNpQrStUwXyZ123456789ABCDEFGHIJKLMNOPQRSTuvwxyz"

# Monitoring
SENTRY_DSN = "https://fd5664ae577039ccb7cce31e91f54533@o4510137537396736.ingest.de.sentry.io/4510138308755536"
SENTRY_ENVIRONMENT = "production"
SENTRY_RELEASE = "database-pipeline-v1.0"

# Caching (optional)
UPSTASH_REDIS_REST_URL = "https://chief-anteater-20186.upstash.io"
UPSTASH_REDIS_REST_TOKEN = "AU7aAAIncDI3ZGVjNWMxZGUyOWQ0ZmYyYjI4NzdkYjM4OGMxZTE3NnAyMjAxODY"