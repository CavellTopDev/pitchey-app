name = "pitchey-browse-api"
main = "index.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Durable Objects disabled for free plan
# To enable WebSocket support, uncomment these lines and upgrade to a paid plan:
# [[durable_objects.bindings]]
# name = "WEBSOCKET_ROOMS"
# class_name = "WebSocketRoom"
# 
# [[migrations]]
# tag = "v1"
# new_classes = ["WebSocketRoom"]

[env.development]
name = "pitchey-browse-api-dev"
vars = { FRONTEND_URL = "http://localhost:5173", DATABASE_URL = "postgresql://test:test@localhost:5432/test", JWT_SECRET = "dev-secret-key" }

[env.production]
name = "pitchey-api-prod"

[env.production.vars]
FRONTEND_URL = "https://pitchey.pages.dev"
# Secrets will be injected at deploy time via GitHub Actions
# DATABASE_URL, JWT_SECRET, SENTRY_DSN, UPSTASH_REDIS_* are set as secrets