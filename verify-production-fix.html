<!DOCTYPE html>
<html>
<head>
    <title>Production WebSocket Test</title>
</head>
<body>
    <h1>Production WebSocket Verification</h1>
    <div id="status">Testing...</div>
    <div id="log"></div>

    <script>
        const statusDiv = document.getElementById('status');
        const logDiv = document.getElementById('log');
        
        function log(message) {
            console.log(message);
            logDiv.innerHTML += `<div>${new Date().toISOString()}: ${message}</div>`;
        }

        // Test the production WebSocket URL
        const wsUrl = 'wss://pitchey-backend-fresh.deno.dev/ws';
        log(`Attempting to connect to: ${wsUrl}`);
        
        const ws = new WebSocket(wsUrl);
        
        ws.onopen = function() {
            log('‚úÖ WebSocket connected successfully!');
            statusDiv.innerHTML = '‚úÖ FIXED: WebSocket connection working';
            statusDiv.style.color = 'green';
        };
        
        ws.onerror = function(error) {
            log('‚ùå WebSocket error: ' + JSON.stringify(error));
            statusDiv.innerHTML = '‚ùå FAILED: WebSocket still not working';
            statusDiv.style.color = 'red';
        };
        
        ws.onclose = function(event) {
            log(`üîå WebSocket closed: ${event.code} - ${event.reason}`);
        };
        
        // Timeout after 10 seconds
        setTimeout(() => {
            if (ws.readyState === WebSocket.CONNECTING) {
                log('‚è∞ Connection timeout after 10 seconds');
                statusDiv.innerHTML = '‚è∞ TIMEOUT: Connection taking too long';
                statusDiv.style.color = 'orange';
                ws.close();
            }
        }, 10000);
    </script>
</body>
</html>