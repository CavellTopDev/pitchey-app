# Deno Deploy Configuration for Pitchey Backend
# This file configures the deployment to Deno Deploy

name: pitchey-backend
description: Pitchey movie pitch platform backend API

# Entry point for Deno Deploy
entrypoint: working-server.ts

# Environment variables that need to be set in Deno Deploy dashboard
env:
  # Database connection (from Neon)
  - DATABASE_URL: # Set this to your Neon database connection string
  
  # JWT secret for authentication
  - JWT_SECRET: # Generate a secure random string
  
  # Stripe configuration
  - STRIPE_SECRET_KEY: # Your Stripe secret key
  - STRIPE_PUBLISHABLE_KEY: # Your Stripe publishable key
  - STRIPE_WEBHOOK_SECRET: # Stripe webhook endpoint secret
  
  # Email service (optional)
  - RESEND_API_KEY: # If using Resend for emails
  
  # Application configuration
  - NODE_ENV: production
  - FRONTEND_URL: https://pitchey-frontend.fly.dev

# Deployment regions (choose regions close to your users)
regions:
  - us-west2  # US West Coast
  - us-east1  # US East Coast
  - europe-west1  # Europe

# Resource limits
limits:
  memory: 512MB
  cpu: 1000m  # 1 CPU core

# Custom headers for security
headers:
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  X-XSS-Protection: "1; mode=block"
  Strict-Transport-Security: "max-age=31536000; includeSubDomains"