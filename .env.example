# ==============================================================================
# PITCHEY EMAIL CONFIGURATION GUIDE
# ==============================================================================
# Copy this file to .env and configure the values below

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================
DATABASE_URL=postgresql://username:password@localhost:5432/pitchey

# ==============================================================================
# BASIC APPLICATION SETTINGS
# ==============================================================================
BASE_URL=https://pitchey.com
APP_URL=https://pitchey.com
DENO_ENV=development
JWT_SECRET=your-super-secret-jwt-key-here

# ==============================================================================
# EMAIL SERVICE CONFIGURATION
# ==============================================================================
# Choose your email provider: sendgrid, ses, or smtp
EMAIL_PROVIDER=sendgrid

# Email sender configuration
EMAIL_FROM=noreply@pitchey.com
EMAIL_FROM_NAME=Pitchey
EMAIL_REPLY_TO=support@pitchey.com

# ==============================================================================
# SENDGRID CONFIGURATION (Recommended)
# ==============================================================================
# Get your API key from https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.your-sendgrid-api-key-here

# ==============================================================================
# AWS S3 STORAGE CONFIGURATION
# ==============================================================================
# Storage provider: s3, local, or hybrid (tries S3 first, falls back to local)
STORAGE_PROVIDER=hybrid
USE_LOCAL_FALLBACK=true

# AWS Credentials (used for both S3 and SES)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# S3 Bucket Configuration
AWS_S3_BUCKET=pitchey-production-media
AWS_S3_BUCKET_STAGING=pitchey-staging-media

# CloudFront CDN Configuration (optional but recommended)
CLOUDFRONT_URL=https://cdn.pitchey.com
CLOUDFRONT_DISTRIBUTION_ID=E1EXAMPLE123

# File Size Limits (in MB)
MAX_FILE_SIZE_MB=50
MAX_IMAGE_SIZE_MB=10
MAX_VIDEO_SIZE_MB=500

# File Security
ENABLE_VIRUS_SCAN=false
ENABLE_WATERMARK=true
SIGNED_URL_EXPIRY_SECONDS=3600

# Allowed File Types (comma-separated)
ALLOWED_IMAGE_TYPES=jpeg,jpg,png,webp,gif
ALLOWED_VIDEO_TYPES=mp4,mov,avi,webm
ALLOWED_DOCUMENT_TYPES=pdf,doc,docx,ppt,pptx,xls,xlsx

# ==============================================================================
# AWS SES EMAIL CONFIGURATION (Alternative to SendGrid)
# ==============================================================================
# If using AWS SES for emails (uses same AWS credentials above)

# ==============================================================================
# SMTP CONFIGURATION (For Gmail, Outlook, etc.)
# ==============================================================================
# If using SMTP instead of SendGrid/SES

# For Gmail (App Password required):
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# SMTP_SECURE=true

# For Outlook/Hotmail:
# SMTP_HOST=smtp-mail.outlook.com
# SMTP_PORT=587
# SMTP_USER=your-email@outlook.com
# SMTP_PASS=your-password
# SMTP_SECURE=true

# Generic SMTP settings:
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
SMTP_SECURE=true

# ==============================================================================
# STRIPE CONFIGURATION (for payment confirmations)
# ==============================================================================
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# ==============================================================================
# EMAIL SETUP INSTRUCTIONS
# ==============================================================================

# 1. SENDGRID SETUP (Recommended)
# ---------------------------------
# 1. Sign up at https://sendgrid.com/
# 2. Create an API key with "Mail Send" permissions
# 3. Set EMAIL_PROVIDER=sendgrid
# 4. Set SENDGRID_API_KEY to your API key
# 5. Verify your domain in SendGrid for better deliverability
# 6. Set up unsubscribe groups for different email types

# 2. GMAIL SETUP (SMTP)
# ----------------------
# 1. Enable 2-factor authentication on your Google account
# 2. Generate an App Password: https://myaccount.google.com/apppasswords
# 3. Set EMAIL_PROVIDER=smtp
# 4. Use the settings shown above for Gmail SMTP

# 3. AWS SES SETUP
# -----------------
# 1. Set up AWS SES in your AWS console
# 2. Verify your sending domain
# 3. Request production access if needed
# 4. Set EMAIL_PROVIDER=ses
# 5. Configure AWS credentials

# ==============================================================================
# EMAIL TYPES SUPPORTED
# ==============================================================================
# ✅ Welcome emails (on registration)
# ✅ Password reset emails
# ✅ Email verification
# ✅ NDA request notifications
# ✅ NDA approval/rejection notifications
# ✅ Payment confirmations
# ✅ Weekly digest emails
# ✅ Pitch activity notifications
# ✅ Message notifications

# ==============================================================================
# API ENDPOINTS AVAILABLE
# ==============================================================================
# POST /api/auth/forgot-password    - Request password reset
# POST /api/auth/reset-password     - Reset password with token
# POST /api/auth/verify-email       - Verify email address
# GET  /api/email/preferences       - Get email preferences
# PUT  /api/email/preferences       - Update email preferences
# POST /api/email/unsubscribe       - Unsubscribe from emails
# GET  /api/email/webhook           - Handle email provider webhooks

# ==============================================================================
# TESTING EMAIL FUNCTIONALITY
# ==============================================================================
# Use these endpoints to test your email setup:
# GET /api/email/test - Send a test email (requires authentication)
# GET /api/email/preview - Preview email templates

# ==============================================================================
# PRODUCTION CONSIDERATIONS
# ==============================================================================
# 1. Use a verified domain for better deliverability
# 2. Set up SPF, DKIM, and DMARC records
# 3. Monitor bounce rates and suppression lists
# 4. Configure webhook endpoints for delivery tracking
# 5. Set up proper error logging and monitoring
# 6. Consider using a CDN for email images
# 7. Test emails across different clients (Gmail, Outlook, etc.)

# ==============================================================================
# TROUBLESHOOTING
# ==============================================================================
# 1. Check email queue status: Monitor /api/email/stats endpoint
# 2. Verify email provider credentials are correct
# 3. Check server logs for email sending errors
# 4. Ensure firewall allows SMTP traffic (if using SMTP)
# 5. Check spam folders for test emails
# 6. Verify domain DNS settings for deliverability